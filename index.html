<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CETL Targeted Practice Exam</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .option-btn {
            transition: all 0.2s ease-in-out;
        }
        .option-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        .correct {
            background-color: #10B981 !important; /* Green-500 */
            color: white !important;
            border-color: #059669 !important;
        }
        .incorrect {
            background-color: #EF4444 !important; /* Red-500 */
            color: white !important;
            border-color: #DC2626 !important;
        }
        .best-answer-highlight {
            box-shadow: 0 0 15px rgba(16, 185, 129, 0.7);
            border: 2px solid #10B981;
        }
        @keyframes fade-in-up {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        .animate-fade-in-up {
            animation: fade-in-up 0.3s ease-out forwards;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <script type="module">
        // --- App State and Logic ---
        const fullQuestionBank = [
            // FERPA / CIPA / Data Privacy
            { domain: "Managing Technology and Support Resources", skill: "Data Privacy and Security", scenario: "A teacher wants to use a 'free' online tool. The terms state it's FERPA compliant but requires student Google logins. What is the leader's first step?", options: [ { text: "Deny the request as it's not on the approved list.", isCorrect: true, isBest: false, feedback: "Policy enforcement is good, but a leader also educates and finds solutions." }, { text: "Trust the vendor's claim and approve it to support the teacher.", isCorrect: false, feedback: "A leader must perform due diligence and not rely on vendor claims alone." }, { text: "Tell the teacher to have students use fake names.", isCorrect: false, feedback: "This is not a scalable or secure solution and circumvents proper data stewardship." }, { text: "Initiate a review to get a signed Data Privacy Agreement (DPA) with the vendor, ensuring they act as a 'school official' under FERPA.", isCorrect: true, isBest: true, feedback: "Correct. A leader ensures legal compliance with outsourced providers through a DPA before allowing access to student data." } ]},
            { domain: "Leadership and Vision", skill: "Ethics and Policies", scenario: "A parent of a 19-year-old high school student, who is financially dependent on the parent, requests access to the student's grades. The student has not given consent. According to FERPA, how should the district respond?", options: [ { text: "Deny the request, as the student is over 18 and all FERPA rights have transferred to them.", isCorrect: true, isBest: false, feedback: "This is the general rule, but FERPA has exceptions. A leader needs to know the nuances." }, { text: "Provide the records, because the student is still attending a secondary school.", isCorrect: false, feedback: "Attendance at a secondary school is not the deciding factor once a student turns 18." }, { text: "Deny the request immediately and inform the student of the parent's attempt to access their records.", isCorrect: false, feedback: "This creates an adversarial situation and misinterprets the law's exceptions." }, { text: "Inform the parent that the district's policy allows access if they can provide evidence that the student is a dependent for tax purposes, in accordance with the FERPA exception.", isCorrect: true, isBest: true, feedback: "Correct. FERPA allows schools to disclose records to parents of a dependent student over 18. A leader knows the exceptions and has a policy to address them." } ]},
            { domain: "Managing Technology and Support Resources", skill: "Business Management", scenario: "To receive E-Rate funding for network equipment, what must the district certify regarding CIPA?", options: [ { text: "That the district has a technology protection measure that blocks or filters visual depictions that are obscene, child pornography, or harmful to minors.", isCorrect: true, isBest: true, feedback: "Correct. This is the core requirement of CIPA for E-Rate eligibility. A leader ensures this compliance for funding." }, { text: "That the district has a 1:1 device program for all students.", isCorrect: false, feedback: "A 1:1 program is not a requirement for CIPA or E-Rate." }, { text: "That all students have signed the district's Acceptable Use Policy.", isCorrect: false, feedback: "While an AUP is a best practice, the specific CIPA requirement for E-rate is about filtering and monitoring." }, { text: "That the district uses a firewall to prevent all access to social media.", isCorrect: false, feedback: "CIPA does not mandate blocking all social media; it focuses on specific categories of harmful content." } ]},
            // VOI vs ROI / TCO
            { domain: "Leadership and Vision", skill: "Business Management", scenario: "You propose investing in a new LMS. It costs more than the current system but offers better tools for personalized learning. How do you justify this to the board?", options: [ { text: "By showing the Return on Investment (ROI) will be positive within 3 years due to saved paper costs.", isCorrect: false, feedback: "This is a weak ROI argument. The primary value is instructional, which is better captured by VOI." }, { text: "By emphasizing the Value of Investment (VOI), linking the LMS features directly to the district's strategic goals for student-centered learning and improved teacher collaboration.", isCorrect: true, isBest: true, feedback: "Correct. A leader justifies instructional technology by its VOI—its alignment with the core educational mission—not just by direct financial returns." }, { text: "By explaining that the TCO is lower due to reduced server maintenance, even if the license is more.", isCorrect: true, isBest: false, feedback: "TCO is an important part of the justification, but focusing on the VOI (the instructional value) is more strategically compelling for a board." }, { text: "By creating a report showing that all of our peer districts are using this new, more expensive LMS.", isCorrect: false, feedback: "Following trends is not a strategic justification. A leader must connect investments to their own district's goals." } ]},
            { domain: "Managing Technology and Support Resources", skill: "Business Management", scenario: "When calculating the Total Cost of Ownership (TCO) for a new 1:1 device initiative, which of the following is an indirect labor cost that a leader must baseline?", options: [ { text: "The purchase price of the devices.", isCorrect: false, feedback: "This is a direct, hard cost, not an indirect labor cost." }, { text: "The annual software licensing fees for the devices.", isCorrect: false, feedback: "This is a direct, recurring cost." }, { text: "The estimated time teachers will spend in professional development learning to use the new devices effectively.", isCorrect: true, isBest: true, feedback: "Correct. TCO includes all costs, including the 'hidden' cost of staff time for training. A leader must account for this indirect labor cost in a realistic budget." }, { text: "The cost of the warranty for the devices.", isCorrect: false, feedback: "This is a direct cost associated with the purchase." } ]},
            // Leadership Mindset: Delegating, Modeling, Risk
            { domain: "Understanding the Educational Environment", skill: "Team Building and Staffing", scenario: "Your days are consumed by personally fixing high-profile tech issues, leaving no time for strategic planning. The most effective leadership action is to:", options: [ { text: "Work longer hours to get everything done.", isCorrect: false, feedback: "This is unsustainable and demonstrates a lack of leadership. A leader builds capacity, not burnout." }, { text: "Delegate responsibility by empowering your team through a clear ticketing and escalation process, freeing you to focus on leadership tasks.", isCorrect: true, isBest: true, feedback: "Correct. A LEADER delegates, builds systems, and empowers their team. This is a core concept of the CETL framework." }, { text: "Ask the superintendent to hire an assistant for you.", isCorrect: false, feedback: "This adds cost without addressing the root problem of a poor workflow and lack of delegation." }, { text: "Personally train a few key teachers to handle these issues in their buildings.", isCorrect: true, isBest: false, feedback: "This is a form of delegation, but it's a tactical fix. Building a systemic process for your own team is the more effective, long-term leadership action." } ]},
            { domain: "Leadership and Vision", skill: "Leading and Creating the Vision", scenario: "A project to implement a new data warehouse is facing delays and is more complex than anticipated. As the leader, how do you communicate this to stakeholders?", options: [ { text: "Avoid mentioning the delays until you have a solution to avoid causing panic.", isCorrect: false, feedback: "A lack of transparency erodes trust. A leader communicates openly." }, { text: "Blame the vendor for the complexity and delays in a public update.", isCorrect: false, feedback: "A leader takes ownership and focuses on solutions, not blame." }, { text: "Clearly explain the risk, which is the probability of the project failing to meet its timeline and budget, and present a revised plan with a more realistic timeline and resource allocation.", isCorrect: true, isBest: true, feedback: "Correct. A leader's job is to assess and explain risk to stakeholders and then propose a clear, revised path forward. This builds trust and shows competent management." }, { text: "Cancel the project to avoid any further risk of failure.", isCorrect: false, feedback: "This is a reactive, not a strategic, response. A leader manages risk, not just avoids it." } ]},
            { domain: "Leadership and Vision", skill: "Leading and Creating the Vision", scenario: "To encourage the use of a new collaborative platform, what is the most effective leadership technique?", options: [ { text: "Mandate its use in a district-wide memo.", isCorrect: false, feedback: "Mandates often lead to compliance, not genuine adoption. Leadership is about influence, not just authority." }, { text: "Ask for permission from building principals to introduce it to their staff.", isCorrect: false, feedback: "A leader doesn't always ask for permission to lead. They build consensus and demonstrate value." }, { text: "Model its use by running your own team meetings and sharing strategic documents on the platform, providing a clear example of its value.", isCorrect: true, isBest: true, feedback: "Correct. A leader models the behavior they want to see. Providing a powerful example is more effective than any mandate." }, { text: "Wait for teachers to discover it on their own.", isCorrect: false,feedback: "This is passive and not a form of leadership." } ]},
            // SCORM / Interoperability
            { domain: "Managing Technology and Support Resources", skill: "Data Management", scenario: "The curriculum department has purchased digital content from three different vendors. They want this content to be accessible from the district's LMS and for student completion data to be tracked in a single place. What standard is essential for this?", options: [ { text: "HTML5", isCorrect: false, feedback: "HTML5 is a web standard for content structure, but it doesn't govern how learning data is passed between systems." }, { text: "SCORM (Sharable Content Object Reference Model)", isCorrect: true, isBest: true, feedback: "Correct. SCORM is the industry standard that enables interoperability between learning content and Learning Management Systems, allowing for tracking and reporting." }, { text: "TCP/IP", isCorrect: false, feedback: "TCP/IP is the fundamental communication protocol for the internet, not a learning content standard." }, { text: "SQL", isCorrect: false, feedback: "SQL is a language for managing databases, not for packaging and sharing learning content." } ]},
            // Fair Use
            { domain: "Leadership and Vision", skill: "Ethics and Policies", scenario: "A teacher uses a 30-second music clip from a popular song in a student-created video project. To comply with Fair Use, the most important factor is that the project:", options: [ { text: "Is less than one minute long.", isCorrect: false, feedback: "The length of the final product is not a primary test for Fair Use." }, { text: "Only uses a small portion of the original song.", isCorrect: true, isBest: false, feedback: "This is one of the four factors of Fair Use, but it's not the most important one in modern interpretation." }, { text: "Transforms the original music by adding new meaning or context, such as using it in a parody or for critique.", isCorrect: true, isBest: true, feedback: "Correct. Transformative use is the most critical factor in modern Fair Use analysis. The new work must add something new, with a further purpose or different character." }, { text: "Gives credit to the original artist in the video.", isCorrect: false, feedback: "Giving credit (attribution) is ethically important but is not a legal defense against a copyright infringement claim. It does not create Fair Use." } ]},
            // Constructivist Learning / Shared Vision
            { domain: "Understanding the Educational Environment", skill: "Instructional Focus", scenario: "To foster a constructivist learning environment, a district leader should advocate for technology that best supports:", options: [ { text: "Drill-and-practice software to reinforce basic facts.", isCorrect: false, feedback: "This supports behaviorist learning, not constructivist, which is about building knowledge." }, { text: "A tightly controlled, linear learning management system.", isCorrect: false, feedback: "This limits student agency, which is contrary to constructivist principles." }, { text: "Simulation or modeling software where students can build, experiment, and reflect on outcomes.", isCorrect: true, isBest: true, feedback: "Correct. This aligns perfectly with constructivist and reflective practices, where students actively construct their own knowledge." }, { text: "A digital textbook with embedded multiple-choice quizzes.", isCorrect: false, feedback: "This is primarily a content delivery tool, not one focused on knowledge construction." } ]},
            { domain: "Leadership and Vision", skill: "Leading and Creating the Vision", scenario: "When developing a shared vision for technology use, the learning sciences suggest that the most effective approach is to:", options: [ { text: "Have the technology department create the vision and present it to the instructional staff for feedback.", isCorrect: false, feedback: "This top-down, siloed approach is unlikely to gain the buy-in needed for a truly shared vision." }, { text: "Adopt the vision of a successful neighboring school district.", isCorrect: false, feedback: "A vision must be authentic to your own district's culture, goals, and needs." }, { text: "Form a cross-functional committee of teachers, administrators, students, and parents to collaboratively build the vision around agreed-upon instructional goals.", isCorrect: true, isBest: true, feedback: "Correct. A shared vision is built through a collaborative, inclusive process focused on learning. This is a core leadership principle." }, { text: "Focus the vision entirely on preparing students for specific technology jobs.", isCorrect: false, feedback: "The vision should be broader, focusing on lifelong learning and adaptable skills, not just specific jobs." } ]},
            // Cloud Computing / Agnostic Devices
            { domain: "Managing Technology and Support Resources", skill: "Information Technology", scenario: "A key advantage of shifting to cloud-based productivity suites (like Google Workspace or Microsoft 365) is that it supports a device-agnostic environment. What does this mean for a district leader?", options: [ { text: "The district must still purchase the same device for every student.", isCorrect: false, feedback: "Device-agnostic means the choice of device is less critical, allowing for more flexibility." }, { text: "It allows for greater flexibility in device purchasing, supporting a mix of Chromebooks, laptops, and tablets, which can lower TCO and improve equity.", isCorrect: true, isBest: true, feedback: "Correct. A device-agnostic strategy, enabled by cloud computing, uncouples the software from the hardware, giving the leader more sustainable and equitable options." }, { text: "All applications will need to be installed on every device.", isCorrect: false, feedback: "Cloud-based applications run in a web browser or thin client, reducing the need for local installations." }, { text: "The district will no longer need a network filter.", isCorrect: false, feedback: "Network security and filtering are still critical, regardless of where applications are hosted." } ]},
            // Professional Development for Leaders
            { domain: "Understanding the Educational Environment", skill: "Professional Learning", scenario: "To best support building principals as instructional leaders, which professional development format is most effective and respectful of their time?", options: [ { text: "A mandatory, full-day, in-person training session held once a year.", isCorrect: false, feedback: "This format is inefficient and not tailored to the immediate, varied needs of busy leaders." }, { text: "A weekly required newsletter with links to articles about technology.", isCorrect: false, feedback: "This is passive and unlikely to lead to meaningful changes in practice." }, { text: "On-demand digital content, such as short videos and web tools, that they can use to provide professional development to their own staff as needed.", isCorrect: true, isBest: true, feedback: "Correct. This empowers leaders, respects their time, and provides just-in-time resources they can immediately apply in their own buildings. It's a leadership-focused PD model." }, { text: "A book study on educational leadership that meets once a month.", isCorrect: true, isBest: false, feedback: "A book study can be valuable, but on-demand digital resources are more flexible and directly applicable to immediate needs." } ]},
            // Ambiguity and Change Management
            { domain: "Leadership and Vision", skill: "Leading and Creating the Vision", scenario: "The district is facing an unexpected budget cut, creating ambiguity and anxiety among staff about technology initiatives. As a leader, your most important role is to:", options: [ { text: "Pause all projects until the budget is finalized to avoid making mistakes.", isCorrect: false, feedback: "This can create more anxiety and halt progress. A leader must navigate ambiguity, not just stop." }, { text: "Tell staff not to worry and that everything will probably be fine.", isCorrect: false, feedback: "This offers false reassurance and undermines trust. A leader must be transparent." }, { text: "Facilitate the change process by transparently communicating what you know, what you don't know, and how decisions will be made, while providing professional development to help staff adapt to new priorities.", isCorrect: true, isBest: true, feedback: "Correct. A leader facilitates change by managing communication, being transparent about the process, and supporting staff through professional development." }, { text: "Immediately cut the newest and least-used technology initiatives to show you are being fiscally responsible.", isCorrect: true, isBest: false, feedback: "This might be a necessary outcome, but making a snap decision without a strategic review is reactive. The process of managing the change is the key leadership task." } ]},
            { domain: "Leadership and Vision", skill: "Strategic Planning", scenario: "Which of the following is the best example of a 'source of truth' for a school district?", options: [ { text: "A spreadsheet of student contacts manually updated by the school secretary.", isCorrect: false, feedback: "This is prone to error and is not an authoritative, integrated source." }, { text: "The official, centralized Student Information System (SIS) that feeds data to all other connected systems.", isCorrect: true, isBest: true, feedback: "Correct. A 'source of truth' is the authoritative system of record. For student data, this is the SIS. A leader ensures such systems are in place to maintain data integrity." }, { text: "The notes from the last parent-teacher conference.", isCorrect: false, feedback: "This is anecdotal information, not an authoritative data source." }, { text: "A teacher's personal gradebook.", isCorrect: false, feedback: "While important, a personal gradebook is not the official system of record for the entire district." } ]},
            { domain: "Understanding the Educational Environment", skill: "Team Building and Staffing", scenario: "Effective work group collaboration through technology is best demonstrated when team members:", options: [ { text: "Review their assigned tasks in a project management tool and present status updates in a weekly meeting.", isCorrect: false, feedback: "This is coordination, but it lacks the deeper element of collaborative critique and knowledge building." }, { text: "Upload their completed work to a shared folder just before the deadline.", isCorrect: false, feedback: "This is just content sharing, not collaboration. There is no interaction or feedback loop." }, { text: "Exchange information and resources, and provide constructive criticism on each other's work using social networking and collaborative document tools.", isCorrect: true, isBest: true, feedback: "Correct. True collaboration involves not just sharing, but actively critiquing, refining, and building upon each other's work. A leader fosters this type of environment." }, { text: "Attend a video conference where the team leader assigns all the tasks.", isCorrect: false, feedback: "This is a top-down directive, not a collaborative process." } ]},
            { domain: "Leadership and Vision", skill: "Strategic Planning", scenario: "A technology leader's primary responsibility in strategic planning is to:", options: [ { text: "Ensure the technology department's budget is as large as possible.", isCorrect: false, feedback: "The goal is not the biggest budget, but the most effective use of resources to support the district's mission." }, { text: "Personally select all software and hardware for the district.", isCorrect: false, feedback: "This is a tactical task, not a strategic one. A leader builds processes for selection, they don't make every choice themselves." }, { text: "Ensure that every technology initiative and expenditure is clearly aligned with the overall mission and goals of the educational institution.", isCorrect: true, isBest: true, feedback: "Correct. This is the essence of strategic leadership: aligning the technology plan with the district's core mission." }, { text: "Write the entire technology plan without input from other departments to ensure it is technically sound.", isCorrect: false, feedback: "A strategic plan must be developed collaboratively to ensure buy-in and relevance to all stakeholders." } ]},
            { domain: "Managing Technology and Support Resources", skill: "Data Management", scenario: "The district wants to provide teachers with 'on-demand' data. What does this concept imply?", options: [ { text: "Data is printed and delivered to teachers once a week.", isCorrect: false, feedback: "This is the opposite of on-demand; it is a scheduled, static report." }, { text: "Teachers have access to a secure, real-time dashboard where they can immediately view and analyze student data as it is updated.", isCorrect: true, isBest: true, feedback: "Correct. 'On-demand' means data is accessible to authorized users when they need it, in a format that is easy to use for decision-making." }, { text: "Teachers must submit a request to the central office to get a custom data report, which takes 2-3 days.", isCorrect: false, feedback: "This is a request-based system, not an on-demand one." }, { text: "All district data is made public on the website for anyone to access at any time.", isCorrect: false, feedback: "This would be a massive violation of data privacy laws like FERPA. On-demand access is for authorized users only." } ]},
            { domain: "Leadership and Vision", skill: "Ethics and Policies", scenario: "A student journalist wants to publish an article critical of the school's web filter. The principal asks you to intervene. As a leader, you should:", options: [ { text: "Use your administrative access to delete the article from the school newspaper's website.", isCorrect: false, feedback: "This is censorship and an unethical abuse of administrative privileges." }, { text: "Explain to the principal that, while the district must be CIPA compliant, student speech is also protected, and the focus should be on educating the student about the reasons for the filter.", isCorrect: true, isBest: true, feedback: "Correct. A leader must balance legal compliance (CIPA) with ethical considerations like student rights and the educational mission. This response models that balance." }, { text: "Suspend the student's network access for violating the AUP.", isCorrect: false, feedback: "Criticizing a policy is not typically an AUP violation. This is a punitive response to protected speech." }, { text: "Tell the principal it's their problem to handle and that you will not get involved.", isCorrect: false, feedback: "The web filter is a technology system, and as the technology leader, you have a responsibility to be part of the conversation and provide context." } ]},
            // ... 80 more unique questions to be added here
        ];

        let currentQuizQuestions = [];
        let currentQuestionIndex = 0;
        let score = 0;
        let quizData = [];

        function showScreen(screenId) {
            document.getElementById('welcome-screen').classList.add('hidden');
            document.getElementById('quiz-screen').classList.add('hidden');
            document.getElementById('results-screen').classList.add('hidden');
            document.getElementById(screenId).classList.remove('hidden');
        }

        function startQuiz() {
            currentQuestionIndex = 0;
            score = 0;
            quizData = [];
            
            const shuffled = [...fullQuestionBank].sort(() => 0.5 - Math.random());
            currentQuizQuestions = shuffled.slice(0, 5); // Select 5 questions
            
            displayQuestion();
            showScreen('quiz-screen');
        }

        function displayQuestion() {
            if (currentQuestionIndex < currentQuizQuestions.length) {
                const question = currentQuizQuestions[currentQuestionIndex];
                const questionContainer = document.getElementById('question-container');
                
                let optionsHtml = '';
                question.options.forEach((option, index) => {
                    optionsHtml += `<button onclick="window.app.selectAnswer(${index})" class="option-btn w-full text-left p-4 bg-white border-2 border-gray-300 rounded-lg shadow-sm hover:bg-blue-50 hover:border-blue-400 focus:outline-none focus:ring-2 focus:ring-blue-500">${option.text}</button>`;
                });

                questionContainer.innerHTML = `
                    <div class="mb-4">
                        <p class="text-sm font-semibold text-blue-600">${question.domain} > ${question.skill}</p>
                        <h2 class="text-2xl font-bold mt-2">${question.scenario}</h2>
                    </div>
                    <div class="space-y-4">${optionsHtml}</div>
                `;
                document.getElementById('progress-bar').style.width = `${((currentQuestionIndex + 1) / currentQuizQuestions.length) * 100}%`;
                document.getElementById('progress-text').innerText = `Question ${currentQuestionIndex + 1} of ${currentQuizQuestions.length}`;

            } else {
                showResults();
            }
        }

        function selectAnswer(selectedIndex) {
            const question = currentQuizQuestions[currentQuestionIndex];
            const selectedOption = question.options[selectedIndex];
            const isBest = selectedOption.isBest;

            if (isBest) {
                score++;
            }

            quizData.push({
                question: question.scenario,
                selectedAnswer: selectedOption.text,
                correctAnswer: question.options.find(o => o.isBest).text,
                isBest: isBest,
                feedback: selectedOption.feedback,
                bestFeedback: question.options.find(o => o.isBest).feedback
            });

            showFeedback(selectedIndex);
        }

        function showFeedback(selectedIndex) {
            const question = currentQuizQuestions[currentQuestionIndex];
            const options = document.querySelectorAll('#question-container .option-btn');
            
            options.forEach((btn, index) => {
                btn.disabled = true;
                const optionData = question.options[index];
                if (optionData.isBest) {
                    btn.classList.add('correct', 'best-answer-highlight');
                } else if (index === selectedIndex) {
                    btn.classList.add('incorrect');
                }
            });

            const feedbackHtml = `
                <div id="feedback-modal" class="fixed inset-0 bg-gray-800 bg-opacity-75 flex items-center justify-center p-4 z-50">
                    <div class="bg-white rounded-lg shadow-xl p-8 max-w-2xl w-full animate-fade-in-up">
                        <h3 class="text-2xl font-bold mb-4">${question.options[selectedIndex].isBest ? "Correct!" : "Review this Concept"}</h3>
                        <div class="mb-4 p-4 rounded-lg ${question.options[selectedIndex].isBest ? 'bg-green-100' : 'bg-red-100'}">
                            <p class="font-bold">Your Answer:</p>
                            <p>${question.options[selectedIndex].text}</p>
                            <p class="mt-2 text-sm">${question.options[selectedIndex].feedback}</p>
                        </div>
                        ${!question.options[selectedIndex].isBest ? `
                        <div class="mb-6 p-4 rounded-lg bg-green-100 border border-green-300">
                            <p class="font-bold text-green-800">The Best Answer:</p>
                            <p class="text-gray-800">${question.options.find(o => o.isBest).text}</p>
                            <p class="mt-2 text-sm text-gray-700">${question.options.find(o => o.isBest).feedback}</p>
                        </div>` : ''}
                        <button onclick="window.app.nextQuestion()" class="w-full bg-blue-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-blue-700 transition-colors">Next Question</button>
                    </div>
                </div>
            `;
            document.body.insertAdjacentHTML('beforeend', feedbackHtml);
        }

        function nextQuestion() {
            const modal = document.getElementById('feedback-modal');
            if (modal) {
                modal.remove();
            }
            currentQuestionIndex++;
            displayQuestion();
        }

        function showResults() {
            const resultsContainer = document.getElementById('results-container');
            const badgeContainer = document.getElementById('badge-container');
            const percent = Math.round((score / currentQuizQuestions.length) * 100);
            
            badgeContainer.innerHTML = `
                <div class="bg-white rounded-xl shadow-lg p-6 border-t-8 ${percent >= 80 ? 'border-green-500' : 'border-yellow-500'}">
                    <h3 class="text-2xl font-bold text-center text-gray-800">Quiz Results</h3>
                    <div class="flex items-center justify-center my-4">
                         <img src="https://storage.googleapis.com/project-avatar-images/a53679dc-2250-47b2-9904-747c11b0e263.png" alt="Learning Icon" class="h-20 w-20 mr-4">
                        <div class="text-5xl font-bold ${percent >= 80 ? 'text-green-600' : 'text-yellow-600'}">${percent}%</div>
                    </div>
                    <p class="text-center text-gray-600">${percent >= 80 ? 'Excellent work! You are on track.' : 'Good effort! Keep reviewing the feedback.'}</p>
                </div>
            `;

            let resultsHtml = '';
            quizData.forEach(result => {
                resultsHtml += `
                    <div class="border-t py-4">
                        <p class="font-semibold">${result.question}</p>
                        <p class="text-sm mt-2 ${result.isBest ? 'text-green-600' : 'text-red-600'}"><span class="font-bold">Your answer:</span> ${result.selectedAnswer}</p>
                        ${!result.isBest ? `<p class="text-sm mt-1 text-blue-600"><span class="font-bold">Best answer:</span> ${result.correctAnswer}</p>` : ''}
                        <div class="mt-2 p-2 bg-gray-100 rounded-md text-sm">
                            <p><span class="font-bold">Rationale:</span> ${result.feedback}</p>
                        </div>
                    </div>
                `;
            });
            resultsContainer.innerHTML = resultsHtml;

            showScreen('results-screen');
        }

        function initializeAppState() {
            showScreen('welcome-screen');
        }

        // Expose functions to global scope for onclick handlers
        window.app = {
            startQuiz,
            selectAnswer,
            nextQuestion,
        };

        // Initialize the app
        initializeAppState();

    </script>

    <div id="app-container" class="max-w-5xl mx-auto p-4 sm:p-6 lg:p-8">

        <!-- Welcome Screen -->
        <div id="welcome-screen">
            <div class="text-center bg-white p-10 rounded-xl shadow-lg">
                <img src="https://storage.googleapis.com/project-avatar-images/a53679dc-2250-47b2-9904-747c11b0e263.png" alt="CETL Prep Icon" class="mx-auto h-32 w-32 mb-4">
                <h1 class="text-4xl font-bold text-gray-900">CETL Targeted Practice</h1>
                <p class="mt-4 text-lg text-gray-600 max-w-2xl mx-auto">This is a focused practice session based on your notes and previous test results. Let's sharpen these specific skills!</p>
                <div class="mt-8 flex justify-center">
                    <button onclick="window.app.startQuiz()" class="bg-blue-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-blue-700 transition-transform transform hover:scale-105">Start 5-Question Quiz</button>
                </div>
            </div>
        </div>

        <!-- Quiz Screen -->
        <div id="quiz-screen" class="hidden">
             <div class="bg-white p-8 rounded-xl shadow-lg">
                <div class="mb-6">
                    <div class="bg-gray-200 rounded-full h-4">
                        <div id="progress-bar" class="bg-blue-500 h-4 rounded-full" style="width: 0%;"></div>
                    </div>
                    <p id="progress-text" class="text-center text-sm mt-2 text-gray-600"></p>
                </div>
                <div id="question-container">
                    <!-- Question will be injected here -->
                </div>
            </div>
        </div>

        <!-- Results Screen -->
        <div id="results-screen" class="hidden">
            <div class="bg-white p-8 rounded-xl shadow-lg">
                <div id="badge-container" class="mb-8">
                    <!-- Badge will be injected here -->
                </div>
                <h3 class="text-xl font-bold mb-4">Detailed Review:</h3>
                <div id="results-container">
                    <!-- Detailed results will be injected here -->
                </div>
                <div class="mt-8 flex justify-center">
                    <button onclick="window.app.startQuiz()" class="bg-blue-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-blue-700">Try Again</button>
                </div>
            </div>
        </div>
        
    </div>

</body>
</html>
